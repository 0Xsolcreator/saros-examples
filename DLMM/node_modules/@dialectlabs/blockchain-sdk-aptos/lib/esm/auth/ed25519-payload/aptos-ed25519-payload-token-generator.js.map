{"version":3,"file":"aptos-ed25519-payload-token-generator.js","sourceRoot":"","sources":["../../../../src/auth/ed25519-payload/aptos-ed25519-payload-token-generator.ts"],"names":[],"mappings":"AAEA,OAAO,EACL,aAAa,EACb,qBAAqB,EACrB,cAAc,GACf,MAAM,kBAAkB,CAAC;AAE1B,MAAM,OAAO,iCAAkC,SAAQ,cAAc;IAC1D,KAAK,CAAC,QAAQ,CAAC,GAAa;QACnC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;QAC7B,MAAM,YAAY,GAAG,qBAAqB,CAAC,MAAM,CAAC,CAAC;QAEnD,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC5B,MAAM,UAAU,GAAG,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAE/C,MAAM,EAAE,SAAS,EAAE,eAAe,EAAE,aAAa,EAAE,GAAG,MAAM,IAAI,CAAC,IAAI,CACnE,YAAY,EACZ,UAAU,EACV,IAAI,CAAC,MAAM,CACZ,CAAC;QAEF,MAAM,gBAAgB,GAAG,aAAa,CAAC,aAAa,CAAC,CAAC;QAEtD,MAAM,QAAQ,GAAG,GAAG,YAAY,IAAI,gBAAgB,IAAI,eAAe,EAAE,CAAC;QAC1E,OAAO;YACL,QAAQ;YACR,IAAI;YACJ,MAAM;YACN,SAAS;YACT,eAAe;YACf,UAAU,EAAE,gBAAgB;YAC5B,YAAY;SACb,CAAC;IACJ,CAAC;CACF","sourcesContent":["import type { Duration } from 'luxon';\nimport type { Token } from '@dialectlabs/sdk';\nimport {\n  bytesToBase64,\n  jsonStringifyToBase64,\n  TokenGenerator,\n} from '@dialectlabs/sdk';\n\nexport class AptosEd25519PayloadTokenGenerator extends TokenGenerator {\n  override async generate(ttl: Duration): Promise<Token> {\n    const header = this.header();\n    const base64Header = jsonStringifyToBase64(header);\n\n    const body = this.body(ttl);\n    const base64Body = jsonStringifyToBase64(body);\n\n    const { signature, base64Signature, signedPayload } = await this.sign(\n      base64Header,\n      base64Body,\n      this.signer,\n    );\n\n    const base64SignedBody = bytesToBase64(signedPayload);\n\n    const rawValue = `${base64Header}.${base64SignedBody}.${base64Signature}`;\n    return {\n      rawValue,\n      body,\n      header,\n      signature,\n      base64Signature,\n      base64Body: base64SignedBody,\n      base64Header,\n    };\n  }\n}\n"]}